# 周报（2.2-2.6）

#### **一、 本周工作内容**

1. **完成 PA1 实验任务**：
   - 实现了简易调试器（SDB）的核心功能，包括单步执行（si）、打印寄存器（info r）、扫描内存（x）等。
   - 完成了表达式求值（Expression Evaluation）模块，利用递归求值算法处理了算术运算、逻辑运算以及解引用（Deref）等操作。
   - 实现了监视点（Watchpoint）池的管理，通过链表维护监视点，辅助程序调试。
2. **指令执行逻辑复盘**：
   - 深入复盘了 NEMU 的指令执行循环（`cpu_exec`），从状态机的视角理解了 PC 寄存器如何驱动程序状态（PC, r1, r2...）的转移。
   - 理解了指令周期中取指、译码、执行的各个阶段，以及编译选项 `-Wall` 和 `-Werror` 在保障系统代码质量中的关键作用。
3. **代码量统计**：
   - 利用 Shell 命令（`find`, `grep`, `wc`）对 `nemu/` 目录进行了代码行数统计。
   - 通过 `git diff pa0..pa1` 分析了相比框架代码的新增贡献，量化了实验产出。

#### **二、 工作感悟**

1. **基础设施的重要性**：
   - 通过对比“使用 GDB 调试客户程序”与“使用 SDB 调试”的时间成本，深刻体会到“磨刀不误砍柴工”的道理。完善的调试基础设施能极大降低定位 Bug 的开销（ROI 极高）。
2. **状态机视角看程序**：
   - 将程序运行抽象为 S = \{PC, Registers, Memory\} 的状态转移，这种视角对后续理解复杂指令系统（如 x86 的 ModR/M 编码）和内核态切换有极大的帮助。
3. **严谨性与安全性**：
   - 在表达式解析中处理 `*`（乘法 vs 解引用）的歧义时，意识到预处理逻辑的严密性是避免系统崩溃的基础。同时，强制开启 `-Werror` 培养了从编码阶段就消除安全隐患的习惯。

#### **三、 春节后计划**

1. **开启 PA2 实验**：
   - 重点研究 i386 手册（RTFM），掌握指令格式与 Opcode Map。
   - 开始初步实现 x86 核心指令的译码和执行函数。
2. **深入理解存储体系**：
   - 复习计算机组成原理中关于内存编址和寻址方式的内容，为后续实现复杂的内存管理打基础。